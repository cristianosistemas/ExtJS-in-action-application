<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
  <title>The source code</title>
    <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
</head>
<body  onload="prettyPrint();">
    <pre class="prettyprint lang-js">Ext.ns('TKE.chartpanel');

<div id="cls-TKE.chartpanel.DeptBreakdown"></div>/**
 * @class TKE.chartpanel.DeptBreakdown
 * @extends TKE.chartpanel.ChartPanelBaseCls
 * An canned implementation extension to {@link TKE.chartpanel.ChartPanelBaseCls}, which provides a means to display
 * the number of employees obtained, retained and lost within a given year. <br />
 * <br />
 * <!--
 * {@link TKE.chartpanel.ChartPanelBaseCls#methodOne this is method one} <br/>
 * {@link TKE.chartpanel.ChartPanelBaseCls#methodOne} <br/>
 * {@link #methodOne another link} <br/>
 * {@link #methodOne} <br/>
 * {@link TKE.chartpanel.ChartPanelBaseCls} <br/>
 * {@link TKE.chartpanel.ChartPanelBaseCls sample class} <br/>
 *  -->
 * @constructor
 * @xtype department_breakdown_chart
 **/
TKE.chartpanel.DepartmentBreakdown = Ext.extend(TKE.chartpanel.ChartPanelBaseCls, {
    //private
    //An implementation of the {@link TKe.chartpanel.ChartPanelBaseCls#buildChart TKE.chartpanel.ChartPanelBaseCls.buildChart} method.
    buildChart : function() {
        return {
            xtype      : 'stackedbarchart',
            store      : this.buildStore(),
            yField     : 'name',
            xField     : 'newHires',
            series     : this.buildSeries(),
            extraStyle : this.chartExtraStyles,
            xAxis      : new Ext.chart.NumericAxis({
                xField          : 'newHires',
                stackingEnabled : true
            }),
            yAxis      :  new Ext.chart.CategoryAxis({
                xField : 'newHires',
                yField : 'name'
            })
        };
    },
    // private
    // An implementation of the {@link TKe.chartpanel.ChartPanelBaseCls#buildStore TKE.chartpanel.ChartPanelBaseCls.buildStore} method.
    buildStore : function() {
        return {
            xtype    : 'jsonstore',
            autoLoad : false,
            url      : 'stats/getDeptBreakdown',
            fields   : [
                'name','numFired', 'prevHired', 'total', 'newHires'
            ]
        };
    },
    //private
    // An implementation of the {@link TKe.chartpanel.ChartPanelBaseCls#buildSeries TKE.chartpanel.ChartPanelBaseCls.buildSeries} method.
    buildSeries : function() {
        var seriesStyles = this.seriesStyles;

        return [
            {
                xField      : 'numFired',
                displayName : 'Lost',
                style       : seriesStyles.red
            },
            {
                xField      : 'prevHired',
                displayName : 'Retained',
                style       : seriesStyles.yellow
            },
            {
                xField      : 'newHires',
                displayName : 'Obtained',
                style       : seriesStyles.green
            },
            {
                type        : 'line',
                xField      : 'total',
                displayName : 'Total',
                style       : seriesStyles.blue
            }
        ];
    }
});

Ext.reg('department_breakdown_chart', TKE.chartpanel.DepartmentBreakdown);</pre>    
</body>
</html>